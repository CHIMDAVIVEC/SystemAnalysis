{"ast":null,"code":"var _jsxFileName = \"D:\\\\BABOGA\\\\SYSAN\\\\client\\\\src\\\\components\\\\panel\\\\ProblemPOVS\\\\Solve\\\\Results.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Descriptions, Form, Button, Space, Input, List, Radio, Popconfirm } from 'antd';\nimport { ProblemContext } from '../../../../context/problem/problemContext';\nimport { UserContext } from '../../../../context/user/userContext';\nimport Loader from '../../../Loader/Loader';\nimport HOC from '../../HOC';\nconst {\n  TextArea\n} = Input;\n\nfunction Results(props) {\n  const {\n    state,\n    setSolved,\n    fetchSingleProblem\n  } = useContext(ProblemContext);\n  const {\n    problem\n  } = state;\n  const id = props.match.params.id;\n  const [method, setMethod] = useState(1);\n  const [exp, setExp] = useState(-1);\n  const {\n    users\n  } = useContext(UserContext).state;\n  const experts = Object.values(users).filter(user => user.role === 'expert');\n  useEffect(() => {\n    async function fetchData() {\n      await fetchSingleProblem(id);\n    }\n\n    fetchData();\n  }, [fetchSingleProblem, id]);\n\n  function handleChange(value) {\n    setMethod(value);\n  }\n\n  function handleChangeE(value) {\n    setExp(value);\n  }\n\n  function toSort() {\n    const data = JSON.parse(JSON.stringify(problem));\n\n    switch (exp) {\n      case -1:\n        let sortedList = eval(`data.alternatives.sort((a, b) => b.result.method${method} - a.result.method${method})`);\n        var k = 0;\n\n        for (let i = 0; i < sortedList.length; i += 1) {\n          if (i !== sortedList.length - 1) {\n            if (eval(`sortedList[i].result.method${method}`) !== eval(`sortedList[i + 1].result.method${method}`)) k += 1;\n          } else if (eval(`sortedList[i].result.method${method}`) !== eval(`sortedList[i - 1].result.method${method}`)) k += 1;\n\n          k === 0 ? k += 1 : k = k;\n          sortedList[i] = { ...sortedList[i],\n            rank: k\n          };\n        }\n\n        return sortedList;\n\n      default:\n        let correct = method;\n        if (method > 2) correct -= 1;\n        let temp = data.alternatives;\n        let expert = data.experts.find(expert => expert.id === exp);\n\n        for (var i = 0; i < temp.length; i += 1) {\n          eval(`temp[i].result.method${method} = (\"[\" + expert.solutions.method${correct}.values[i] + \"]\")`);\n        }\n\n        for (let i = 0; i < temp.length; i += 1) {\n          temp[i] = { ...temp[i],\n            rank: temp[i].id + 1\n          };\n        }\n\n        return temp;\n    }\n  }\n\n  const handleClick = values => {\n    values = { ...problem,\n      status: 'Решена'\n    };\n    setSolved(values);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, problem && problem.status !== 'Открыта' ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Form, {\n    name: \"problem_details_form\",\n    className: \"login-form\",\n    layout: \"vertical\",\n    size: \"large\",\n    style: {\n      clear: 'both'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Descriptions, {\n    title: \"\\u041F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440 \\u0440\\u0435\\u0448\\u0435\\u043D\\u0438\\u044F\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Descriptions.Item, {\n    label: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u044B\",\n    span: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TextArea, {\n    autoSize: {\n      minRows: 1,\n      maxRows: 10\n    },\n    cols: 40,\n    defaultValue: problem.name,\n    disabled: true,\n    style: {\n      background: 'white',\n      color: 'black'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Descriptions.Item, {\n    label: \"\\u041C\\u0435\\u0442\\u043E\\u0434 \\u0440\\u0435\\u0448\\u0435\\u043D\\u0438\\u044F\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Radio.Group, {\n    defaultValue: 1,\n    name: \"method\",\n    onChange: data => handleChange(data.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Space, {\n    direction: \"vertical\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Radio, {\n    value: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 21\n    }\n  }, \"\\u041C\\u0435\\u0442\\u043E\\u0434 \\u043F\\u0430\\u0440\\u043D\\u044B\\u0445 \\u0441\\u0440\\u0430\\u0432\\u043D\\u0435\\u043D\\u0438\\u0439\"), /*#__PURE__*/React.createElement(Radio, {\n    value: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  }, \"\\u0412\\u0437\\u0432\\u0435\\u0448\\u0435\\u043D\\u043D\\u044B\\u0445 \\u044D\\u043A\\u0441\\u043F\\u0435\\u0440\\u0442\\u043D\\u044B\\u0445 \\u043E\\u0446\\u0435\\u043D\\u043E\\u043A\"), /*#__PURE__*/React.createElement(Radio, {\n    value: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  }, \"\\u041F\\u0440\\u0435\\u0434\\u043F\\u043E\\u0447\\u0442\\u0435\\u043D\\u0438\\u044F\"), /*#__PURE__*/React.createElement(Radio, {\n    value: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 21\n    }\n  }, \"\\u0420\\u0430\\u043D\\u0433\\u0430\"), /*#__PURE__*/React.createElement(Radio, {\n    value: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 21\n    }\n  }, \"\\u041F\\u043E\\u043B\\u043D\\u043E\\u0433\\u043E \\u043F\\u043E\\u043F\\u0430\\u0440\\u043D\\u043E\\u0433\\u043E \\u0441\\u043E\\u043F\\u043E\\u0441\\u0442\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F\"))))), /*#__PURE__*/React.createElement(Space, {\n    direction: \"vertical\",\n    style: {\n      width: '30%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Radio.Group, {\n    defaultValue: -1,\n    name: \"expert\",\n    onChange: data => handleChangeE(data.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Space, {\n    direction: \"vertical\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Radio, {\n    value: -1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 19\n    }\n  }, \"\\u0412\\u0441\\u0435\"), experts.filter(expert => problem.experts.map(exs => exs.id).includes(expert._id)).map((expert, i) => /*#__PURE__*/React.createElement(Radio, {\n    value: expert._id,\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 23\n    }\n  }, expert.name, \" \", expert.surname, \" \", ': ', \" \", expert.rating)))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  }), (method === 2 || method === 3) && /*#__PURE__*/React.createElement(Radio.Group, {\n    name: \"method\",\n    defaultValue: 2,\n    onChange: data => handleChange(data.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Space, {\n    direction: \"vertical\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Radio, {\n    value: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 21\n    }\n  }, \"\\u041D\\u0430 \\u043E\\u0441\\u043D\\u043E\\u0432\\u0435 \\u0434\\u043E\\u043B\\u0436\\u043D\\u043E\\u0441\\u0442\\u0438 \\u0438 \\u0443\\u0447\\u0435\\u043D\\u043E\\u0439 \\u0441\\u0442\\u0435\\u043F\\u0435\\u043D\\u0438\"), /*#__PURE__*/React.createElement(Radio, {\n    value: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }, \"\\u041D\\u0430 \\u043E\\u0441\\u043D\\u043E\\u0432\\u0435 \\u0430\\u0440\\u0433\\u0443\\u043C\\u0435\\u043D\\u0442\\u0430\\u0446\\u0438\\u0438 \\u0438 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u043D\\u043E\\u0441\\u0442\\u0438\"))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(List, {\n    header: 'Альтернативы:',\n    bordered: true,\n    size: \"small\",\n    dataSource: toSort(),\n    renderItem: (alternative, k) => /*#__PURE__*/React.createElement(List.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }\n    }, alternative.rank, ': ', \" \", '(№' + (alternative.id + 1) + ')', alternative.formulation, \" \", ': ', ' ', eval(`alternative.result.method${method}`) !== '[undefined]' && eval(`alternative.result.method${method}`) !== null ? parseFloat(eval(`alternative.result.method${method}`).toFixed(3)) : 'решение еще не представлено'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row justify-content-center align-items-center\",\n    style: {\n      marginTop: '5%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"align-self-center text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Space, {\n    direction: \"vertical\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"info\",\n    className: \"mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/problems\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 21\n    }\n  }, \"\\u041E\\u0431\\u0440\\u0430\\u0442\\u043D\\u043E\")), problem.status === 'Решается' && /*#__PURE__*/React.createElement(Popconfirm, {\n    title: \"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",\n    onConfirm: handleClick,\n    okText: \"\\u0414\\u0430\",\n    cancelText: \"\\u041D\\u0435\\u0442\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    className: \"mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 23\n    }\n  }, \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C \\u043F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u0443\"))))))) : /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 9\n    }\n  }));\n}\n\nexport default HOC(Results);","map":{"version":3,"sources":["D:/BABOGA/SYSAN/client/src/components/panel/ProblemPOVS/Solve/Results.js"],"names":["React","useContext","useEffect","useState","Link","Descriptions","Form","Button","Space","Input","List","Radio","Popconfirm","ProblemContext","UserContext","Loader","HOC","TextArea","Results","props","state","setSolved","fetchSingleProblem","problem","id","match","params","method","setMethod","exp","setExp","users","experts","Object","values","filter","user","role","fetchData","handleChange","value","handleChangeE","toSort","data","JSON","parse","stringify","sortedList","eval","k","i","length","rank","correct","temp","alternatives","expert","find","handleClick","status","clear","minRows","maxRows","name","background","color","target","width","map","exs","includes","_id","surname","rating","alternative","formulation","parseFloat","toFixed","marginTop"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport {\r\n  Descriptions,\r\n  Form,\r\n  Button,\r\n  Space,\r\n  Input,\r\n  List,\r\n  Radio,\r\n  Popconfirm\r\n} from 'antd';\r\nimport { ProblemContext } from '../../../../context/problem/problemContext';\r\nimport { UserContext } from '../../../../context/user/userContext';\r\nimport Loader from '../../../Loader/Loader';\r\nimport HOC from '../../HOC';\r\n\r\nconst { TextArea } = Input;\r\n\r\nfunction Results(props) {\r\n  const { state, setSolved, fetchSingleProblem } = useContext(ProblemContext);\r\n  const { problem } = state;\r\n  const id = props.match.params.id;\r\n  const [method, setMethod] = useState(1);\r\n  const [exp, setExp] = useState(-1);\r\n  const { users } = useContext(UserContext).state;\r\n  const experts = Object.values(users).filter((user) => user.role === 'expert');\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      await fetchSingleProblem(id);\r\n    }\r\n    fetchData();\r\n  }, [fetchSingleProblem, id]);\r\n\r\n  function handleChange(value) {\r\n    setMethod(value);\r\n  }\r\n\r\n  function handleChangeE(value) {\r\n    setExp(value);\r\n  }\r\n\r\n  function toSort() {\r\n    const data = JSON.parse(JSON.stringify(problem));\r\n    switch (exp) {\r\n      case -1:\r\n        let sortedList = eval(\r\n          `data.alternatives.sort((a, b) => b.result.method${method} - a.result.method${method})`\r\n        );\r\n        var k = 0;\r\n        for (let i = 0; i < sortedList.length; i += 1) {\r\n          if (i !== sortedList.length - 1) {\r\n            if (\r\n              eval(`sortedList[i].result.method${method}`) !==\r\n              eval(`sortedList[i + 1].result.method${method}`)\r\n            )\r\n              k += 1;\r\n          } else if (\r\n            eval(`sortedList[i].result.method${method}`) !==\r\n            eval(`sortedList[i - 1].result.method${method}`)\r\n          )\r\n            k += 1;\r\n          k === 0 ? (k += 1) : (k = k);\r\n          sortedList[i] = {\r\n            ...sortedList[i],\r\n            rank: k\r\n          };\r\n        }\r\n        return sortedList;\r\n      default:\r\n        let correct = method;\r\n        if (method > 2) correct -= 1;\r\n        let temp = data.alternatives;\r\n        let expert = data.experts.find((expert) => expert.id === exp);\r\n        for (var i = 0; i < temp.length; i += 1) {\r\n          eval(\r\n            `temp[i].result.method${method} = (\"[\" + expert.solutions.method${correct}.values[i] + \"]\")`\r\n          );\r\n        }\r\n        for (let i = 0; i < temp.length; i += 1) {\r\n          temp[i] = {\r\n            ...temp[i],\r\n            rank: temp[i].id + 1\r\n          };\r\n        }\r\n        return temp;\r\n    }\r\n  }\r\n\r\n  const handleClick = (values) => {\r\n    values = {\r\n      ...problem,\r\n      status: 'Решена'\r\n    };\r\n    setSolved(values);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {problem && problem.status !== 'Открыта' ? (\r\n        <>\r\n          <Form\r\n            name=\"problem_details_form\"\r\n            className=\"login-form\"\r\n            layout=\"vertical\"\r\n            size=\"large\"\r\n            style={{ clear: 'both' }}\r\n          >\r\n            <Descriptions title=\"Просмотр решения\">\r\n              <Descriptions.Item label=\"Название проблемы\" span={2}>\r\n                <TextArea\r\n                  autoSize={{ minRows: 1, maxRows: 10 }}\r\n                  cols={40}\r\n                  defaultValue={problem.name}\r\n                  disabled={true}\r\n                  style={{ background: 'white', color: 'black' }}\r\n                />\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label=\"Метод решения\">\r\n                <Radio.Group\r\n                  defaultValue={1}\r\n                  name=\"method\"\r\n                  onChange={(data) => handleChange(data.target.value)}\r\n                >\r\n                  <Space direction=\"vertical\">\r\n                    <Radio value={1}>Метод парных сравнений</Radio>\r\n                    <Radio value={2}>Взвешенных экспертных оценок</Radio>\r\n                    <Radio value={4}>Предпочтения</Radio>\r\n                    <Radio value={5}>Ранга</Radio>\r\n                    <Radio value={6}>Полного попарного сопоставления</Radio>\r\n                  </Space>\r\n                </Radio.Group>\r\n              </Descriptions.Item>\r\n            </Descriptions>\r\n            <Space direction=\"vertical\" style={{ width: '30%' }}>\r\n              <Radio.Group\r\n                defaultValue={-1}\r\n                name=\"expert\"\r\n                onChange={(data) => handleChangeE(data.target.value)}\r\n              >\r\n                <Space direction=\"vertical\">\r\n                  <Radio value={-1}>Все</Radio>\r\n                  {experts\r\n                    .filter((expert) =>\r\n                      problem.experts.map((exs) => exs.id).includes(expert._id)\r\n                    )\r\n                    .map((expert, i) => (\r\n                      <Radio value={expert._id} key={i}>\r\n                        {expert.name} {expert.surname} {': '} {expert.rating}\r\n                      </Radio>\r\n                    ))}\r\n                </Space>\r\n              </Radio.Group>\r\n              <br />\r\n              {(method === 2 || method === 3) && (\r\n                <Radio.Group\r\n                  name=\"method\"\r\n                  defaultValue={2}\r\n                  onChange={(data) => handleChange(data.target.value)}\r\n                >\r\n                  <Space direction=\"vertical\">\r\n                    <Radio value={2}>\r\n                      На основе должности и ученой степени\r\n                    </Radio>\r\n                    <Radio value={3}>\r\n                      На основе аргументации и информированности\r\n                    </Radio>\r\n                  </Space>\r\n                </Radio.Group>\r\n              )}\r\n              <br />\r\n            </Space>\r\n            <List\r\n              header={'Альтернативы:'}\r\n              bordered\r\n              size=\"small\"\r\n              dataSource={toSort()}\r\n              renderItem={(alternative, k) => (\r\n                <List.Item>\r\n                  {alternative.rank}\r\n                  {': '} {'(№' + (alternative.id + 1) + ')'}\r\n                  {alternative.formulation} {': '}{' '}\r\n                  {eval(`alternative.result.method${method}`) !==\r\n                    '[undefined]' &&\r\n                  eval(`alternative.result.method${method}`) !== null\r\n                    ? parseFloat(\r\n                        eval(`alternative.result.method${method}`).toFixed(3)\r\n                      )\r\n                    : 'решение еще не представлено'}\r\n                </List.Item>\r\n              )}\r\n            ></List>\r\n            <div\r\n              className=\"row justify-content-center align-items-center\"\r\n              style={{ marginTop: '5%' }}\r\n            >\r\n              <div className=\"align-self-center text-center\">\r\n                <Space direction=\"vertical\">\r\n                  <Button type=\"info\" className=\"mr-2\">\r\n                    <Link to=\"/problems\">Обратно</Link>\r\n                  </Button>\r\n                  {problem.status === 'Решается' && (\r\n                    <Popconfirm\r\n                      title=\"Вы уверены?\"\r\n                      onConfirm={handleClick}\r\n                      okText=\"Да\"\r\n                      cancelText=\"Нет\"\r\n                    >\r\n                      <Button type=\"primary\" htmlType=\"submit\" className=\"mr-2\">\r\n                        Закрыть проблему\r\n                      </Button>\r\n                    </Popconfirm>\r\n                  )}\r\n                </Space>\r\n              </div>\r\n            </div>\r\n          </Form>\r\n        </>\r\n      ) : (\r\n        <Loader />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default HOC(Results);\r\n"]},"metadata":{},"sourceType":"module"}