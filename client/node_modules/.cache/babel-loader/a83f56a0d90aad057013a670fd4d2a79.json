{"ast":null,"code":"var _jsxFileName = \"D:\\\\BABOGA\\\\SYSAN\\\\client\\\\src\\\\components\\\\panel\\\\SinglePages\\\\SingleUser.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport { Typography, Popconfirm, Button } from 'antd';\nimport { UserContext } from '../../../context/user/userContext';\nimport { checkRole } from '../../../helpers/checkAuth';\nimport SingleUserStyled from '../../styles/SingleUserStyled';\nimport PasswordForm from './PasswordForm/PasswordForm';\nimport UserForm from '../Forms/UserForm';\nimport Loader from '../../Loader/Loader';\nimport HOC from '../HOC';\nconst index = '4';\n\nfunction SingleExpert(props) {\n  const {\n    state,\n    fetchSingleUser,\n    editUserAction,\n    deleteUserAction,\n    changeUserPasswordAction\n  } = useContext(UserContext);\n  const [passwordFormVisibility, setpasswordFormVisibility] = useState(false);\n  const {\n    loading,\n    user\n  } = state;\n\n  const handlePasswordChange = data => {\n    changeUserPasswordAction(data);\n    setpasswordFormVisibility(false);\n  };\n\n  const changePasswordModal = () => {\n    setpasswordFormVisibility(!passwordFormVisibility);\n  };\n\n  const id = props.match.params.id;\n  useEffect(() => {\n    fetchSingleUser(id);\n  }, [fetchSingleUser, id]);\n\n  const onFinish = values => {\n    values._id = user._id;\n    delete values.password;\n    editUserAction(values);\n  };\n\n  const onConfirmDelete = () => {\n    deleteUserAction(id).then(() => setTimeout(function () {\n      window.location.replace('/users');\n    }, 1000));\n  };\n\n  return /*#__PURE__*/React.createElement(SingleUserStyled, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, user ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F \", user.name, \" \", user.surname), checkRole() === 'admin' && /*#__PURE__*/React.createElement(Popconfirm, {\n    title: \"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",\n    onConfirm: onConfirmDelete,\n    okText: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\",\n    cancelText: \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"float-right\",\n    danger: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 15\n    }\n  }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\")), /*#__PURE__*/React.createElement(UserForm, {\n    user: user,\n    onFinish: onFinish,\n    changePasswordModal: changePasswordModal,\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  })) : /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(PasswordForm, {\n    visible: passwordFormVisibility,\n    onCreate: handlePasswordChange,\n    loading: loading,\n    onCancel: () => {\n      setpasswordFormVisibility(false);\n    },\n    id: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default HOC(SingleExpert, index);","map":{"version":3,"sources":["D:/BABOGA/SYSAN/client/src/components/panel/SinglePages/SingleUser.js"],"names":["React","useContext","useState","useEffect","Typography","Popconfirm","Button","UserContext","checkRole","SingleUserStyled","PasswordForm","UserForm","Loader","HOC","index","SingleExpert","props","state","fetchSingleUser","editUserAction","deleteUserAction","changeUserPasswordAction","passwordFormVisibility","setpasswordFormVisibility","loading","user","handlePasswordChange","data","changePasswordModal","id","match","params","onFinish","values","_id","password","onConfirmDelete","then","setTimeout","window","location","replace","name","surname"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,SAAtC,QAAuD,OAAvD;AACA,SAASC,UAAT,EAAqBC,UAArB,EAAiCC,MAAjC,QAA+C,MAA/C;AACA,SAASC,WAAT,QAA4B,mCAA5B;AACA,SAASC,SAAT,QAA0B,4BAA1B;AAEA,OAAOC,gBAAP,MAA6B,+BAA7B;AACA,OAAOC,YAAP,MAAyB,6BAAzB;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AAEA,OAAOC,GAAP,MAAgB,QAAhB;AAEA,MAAMC,KAAK,GAAG,GAAd;;AACA,SAASC,YAAT,CAAsBC,KAAtB,EAA6B;AAC3B,QAAM;AACJC,IAAAA,KADI;AAEJC,IAAAA,eAFI;AAGJC,IAAAA,cAHI;AAIJC,IAAAA,gBAJI;AAKJC,IAAAA;AALI,MAMFpB,UAAU,CAACM,WAAD,CANd;AAOA,QAAM,CAACe,sBAAD,EAAyBC,yBAAzB,IAAsDrB,QAAQ,CAAC,KAAD,CAApE;AAEA,QAAM;AAAEsB,IAAAA,OAAF;AAAWC,IAAAA;AAAX,MAAoBR,KAA1B;;AAEA,QAAMS,oBAAoB,GAAIC,IAAD,IAAU;AACrCN,IAAAA,wBAAwB,CAACM,IAAD,CAAxB;AACAJ,IAAAA,yBAAyB,CAAC,KAAD,CAAzB;AACD,GAHD;;AAKA,QAAMK,mBAAmB,GAAG,MAAM;AAChCL,IAAAA,yBAAyB,CAAC,CAACD,sBAAF,CAAzB;AACD,GAFD;;AAGA,QAAMO,EAAE,GAAGb,KAAK,CAACc,KAAN,CAAYC,MAAZ,CAAmBF,EAA9B;AAEA1B,EAAAA,SAAS,CAAC,MAAM;AACde,IAAAA,eAAe,CAACW,EAAD,CAAf;AACD,GAFQ,EAEN,CAACX,eAAD,EAAkBW,EAAlB,CAFM,CAAT;;AAIA,QAAMG,QAAQ,GAAIC,MAAD,IAAY;AAC3BA,IAAAA,MAAM,CAACC,GAAP,GAAaT,IAAI,CAACS,GAAlB;AACA,WAAOD,MAAM,CAACE,QAAd;AACAhB,IAAAA,cAAc,CAACc,MAAD,CAAd;AACD,GAJD;;AAMA,QAAMG,eAAe,GAAG,MAAM;AAC5BhB,IAAAA,gBAAgB,CAACS,EAAD,CAAhB,CAAqBQ,IAArB,CAA0B,MACxBC,UAAU,CAAC,YAAY;AACrBC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,QAAxB;AACD,KAFS,EAEP,IAFO,CADZ;AAKD,GAND;;AAQA,sBACE,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGhB,IAAI,gBACH,uDACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uKAC+BA,IAAI,CAACiB,IADpC,OAC2CjB,IAAI,CAACkB,OADhD,CADF,EAIGnC,SAAS,OAAO,OAAhB,iBACC,oBAAC,UAAD;AACE,IAAA,KAAK,EAAC,0DADR;AAEE,IAAA,SAAS,EAAE4B,eAFb;AAGE,IAAA,MAAM,EAAC,4CAHT;AAIE,IAAA,UAAU,EAAC,4CAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAME,oBAAC,MAAD;AAAQ,IAAA,SAAS,EAAC,aAAlB;AAAgC,IAAA,MAAM,MAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6FANF,CALJ,eAiBE,oBAAC,QAAD;AACE,IAAA,IAAI,EAAEX,IADR;AAEE,IAAA,QAAQ,EAAEO,QAFZ;AAGE,IAAA,mBAAmB,EAAEJ,mBAHvB;AAIE,IAAA,OAAO,EAAEJ,OAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBF,CADG,gBA0BH,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA3BJ,eA6BE,oBAAC,YAAD;AACE,IAAA,OAAO,EAAEF,sBADX;AAEE,IAAA,QAAQ,EAAEI,oBAFZ;AAGE,IAAA,OAAO,EAAEF,OAHX;AAIE,IAAA,QAAQ,EAAE,MAAM;AACdD,MAAAA,yBAAyB,CAAC,KAAD,CAAzB;AACD,KANH;AAOE,IAAA,EAAE,EAAEM,EAPN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA7BF,CADF;AAyCD;;AAED,eAAehB,GAAG,CAACE,YAAD,EAAeD,KAAf,CAAlB","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport { Typography, Popconfirm, Button } from 'antd';\nimport { UserContext } from '../../../context/user/userContext';\nimport { checkRole } from '../../../helpers/checkAuth';\n\nimport SingleUserStyled from '../../styles/SingleUserStyled';\nimport PasswordForm from './PasswordForm/PasswordForm';\nimport UserForm from '../Forms/UserForm';\nimport Loader from '../../Loader/Loader';\n\nimport HOC from '../HOC';\n\nconst index = '4';\nfunction SingleExpert(props) {\n  const {\n    state,\n    fetchSingleUser,\n    editUserAction,\n    deleteUserAction,\n    changeUserPasswordAction\n  } = useContext(UserContext);\n  const [passwordFormVisibility, setpasswordFormVisibility] = useState(false);\n\n  const { loading, user } = state;\n\n  const handlePasswordChange = (data) => {\n    changeUserPasswordAction(data);\n    setpasswordFormVisibility(false);\n  };\n\n  const changePasswordModal = () => {\n    setpasswordFormVisibility(!passwordFormVisibility);\n  };\n  const id = props.match.params.id;\n\n  useEffect(() => {\n    fetchSingleUser(id);\n  }, [fetchSingleUser, id]);\n\n  const onFinish = (values) => {\n    values._id = user._id;\n    delete values.password;\n    editUserAction(values);\n  };\n\n  const onConfirmDelete = () => {\n    deleteUserAction(id).then(() =>\n      setTimeout(function () {\n        window.location.replace('/users');\n      }, 1000)\n    );\n  };\n\n  return (\n    <SingleUserStyled>\n      {user ? (\n        <>\n          <Typography>\n            Редактирование пользователя {user.name} {user.surname}\n          </Typography>\n          {checkRole() === 'admin' && (\n            <Popconfirm\n              title=\"Вы уверены?\"\n              onConfirm={onConfirmDelete}\n              okText=\"Удалить\"\n              cancelText=\"Закрыть\"\n            >\n              <Button className=\"float-right\" danger>\n                Удалить профиль\n              </Button>\n            </Popconfirm>\n          )}\n\n          <UserForm\n            user={user}\n            onFinish={onFinish}\n            changePasswordModal={changePasswordModal}\n            loading={loading}\n          />\n        </>\n      ) : (\n        <Loader />\n      )}\n      <PasswordForm\n        visible={passwordFormVisibility}\n        onCreate={handlePasswordChange}\n        loading={loading}\n        onCancel={() => {\n          setpasswordFormVisibility(false);\n        }}\n        id={id}\n      />\n    </SingleUserStyled>\n  );\n}\n\nexport default HOC(SingleExpert, index);\n"]},"metadata":{},"sourceType":"module"}